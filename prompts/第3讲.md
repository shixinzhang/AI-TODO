# AGENTS.md

```
# Project Instructions
## Code Style
- Use TypeScript for all new files
- Prefer functional components in React
- Use snake_case for database columns
## Architecture
- Follow the repository pattern
- Keep business logic in service layers
```

# 规则模版

## 项目结构规范

```
to-do-list/
├── pages/                    # Next.js 页面和 API 路由
│   ├── _app.tsx             # 应用入口，全局样式引入
│   ├── index.tsx             # 前端首页（待办事项列表页面）
│   └── api/                  # API 路由目录
│       └── tasks/            # 任务相关 API
│           ├── index.ts      # GET/POST /api/tasks
│           ├── [id].ts       # PATCH/DELETE /api/tasks/[id]
│           └── breakdown.ts  # POST /api/tasks/breakdown
│
├── lib/                      # 工具库和配置
│   ├── config.ts            # 环境变量配置（API_BASE_URL, APP_ID, DeepSeek 配置）
│   └── supabase.ts          # Supabase 客户端初始化
│
├── types/                    # TypeScript 类型定义
│   └── task.ts              # 任务相关的类型定义
│
├── styles/                   # 全局样式
│   └── globals.css          # Tailwind CSS 和自定义样式
│
├── node_modules/            # 依赖包（自动生成）
│
├── .next/                    # Next.js 构建输出（自动生成，已忽略）
│
├── package.json             # 项目配置和依赖
├── package-lock.json        # 依赖锁定文件
├── tsconfig.json            # TypeScript 配置
├── next.config.js           # Next.js 配置
├── tailwind.config.cjs      # Tailwind CSS 配置
├── postcss.config.cjs       # PostCSS 配置
│
├── supabase-schema.sql      # 数据库表结构 SQL
├── env.example              # 环境变量示例文件
│
├── API_DOCUMENTATION.md     # API 接口文档
├── SETUP.md                 # 项目设置指南
├── PROJECT_STRUCTURE.md     # 本文件：项目结构文档
│
└── test-*.sh                 # 测试脚本
```

## 代码风格规范

```
---
description: "项目代码风格规范"
globs: ["**/*.ts", "**/*.tsx", "**/*.js", "**/*.jsx"]
alwaysApply: true
---
# 代码风格规范
## 缩进与格式
- 使用 2 个空格缩进，禁止使用制表符
- 单行最大长度 120 字符
- 语句末尾必须加分号
- 使用单引号包裹字符串
## 命名约定
- 变量和函数：camelCase（如 `userName`、`fetchData`）
- 组件和类：PascalCase（如 `UserProfile`、`DataService`）
- 常量：UPPER_SNAKE_CASE（如 `API_BASE_URL`）
- 接口和类型：PascalCase（如 `UserData`、`ButtonProps`）
## TypeScript 规范
- 启用严格模式（`strict: true`）
- 禁止使用 `any` 类型
- 所有函数参数和返回值必须显式声明类型
- 使用 `interface` 定义对象类型
## 导入规范
- 导入语句按类型分组排序：第三方库 → 项目内部模块 → 相对路径
- 按需导入，避免导入未使用的模块
- 使用路径别名（如 `@/components/Button`）
## 注释规范
- 公共 API 必须添加 JSDoc 注释
- 复杂逻辑需添加行内说明
- 使用 `TODO`、`FIXME` 标记待处理项
```

## 功能实现规范

```
---
description: "功能实现规范"
globs: ["**/*.ts", "**/*.tsx"]
alwaysApply: true
---
# 功能实现规范
## React 组件规范
- 使用函数组件 + Hooks，禁止使用类组件
- Props 必须定义接口类型
- 复杂计算使用 `useMemo`/`useCallback` 优化性能
- 使用自定义 Hook 提取可复用逻辑
## 状态管理
- 组件内部状态：`useState`
- 跨组件状态：`useContext` 或状态管理库
- 避免在组件中直接修改 props
## API 调用规范
- 异步操作必须添加错误处理（`try/catch` 或 `.catch()`）
- 使用统一的请求工具函数（如 `@/utils/request`）
- 响应数据必须使用类型包装器
- 禁止在组件中直接调用第三方 API 库
## 错误处理
- 所有异步操作必须捕获错误
- 使用错误边界包装页面组件
- 禁止吞掉异常，必须记录或抛出
## 性能优化
- 大列表使用虚拟化技术
- 图片使用懒加载
- 避免在渲染函数中进行复杂计算
- 使用 `React.memo` 包装纯展示组件
## 测试规范
- 关键功能必须有单元测试
- 测试文件命名：`{{ComponentName}}.test.tsx`
- 使用 `describe` + `it` 结构组织测试用例
- 测试覆盖率不低于 80%
## 代码质量
- 禁止使用 `console.log` 生产环境
- 避免魔法数字，使用常量定义
- 函数长度不超过 50 行
- 文件大小不超过 500 行
```

# MCP


```
{
    "supabase": {
        "command": "/opt/homebrew/bin/npx",
        "args": [
            "-y",
            "@supabase/mcp-server-supabase@latest",
            "--access-token",
            "换成你自己的"
        ],
        "env": {
            "PATH": "/opt/homebrew/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin"
        }
    }
}
```

```
提示词：使用 supabase mcp 查看下我的 todo-list 项目有哪些 table
提示词：使用 supabase mcp 新建一个 test 表，字段为 id 和 key
```


```
{
    "Playwright": {
        "command": "/opt/homebrew/bin/node",
        "args": [
            "/opt/homebrew/lib/node_modules/@playwright/mcp/cli.js"
        ],
        "env": {

        }
    }
}
```

```
提示词：启动项目，使用 Playwright MCP 添加一个“撰写第四讲”的待办事项并进行拆解，完成后截图
```


```
    "github": {
      "url": "https://api.githubcopilot.com/mcp/",
      "headers": {
        "Authorization": "Bearer 你的 token"
      }
    }
```


```
    "context7": {
      "url": "https://mcp.context7.com/mcp",
      "headers": {
        "CONTEXT7_API_KEY": "xxx"
      }
    }
```

```
实现博客发布功能：

1. 用户输入标题、正文、标签
2. 支持 Markdown 格式
3. 发布前需要预览
4. 发布成功后跳转到文章详情页
5. 如果标题为空，显示错误提示
6. 需要包含 Loading 状态"
```


```
"基于 FastAPI，使用 Pydantic 做数据验证，数据库用 SQLite，所有 API 必须包含 Try-Catch 并返回标准 JSON 格式：

{

"success": true/false,

"data": {},

"error": ""

}"
```